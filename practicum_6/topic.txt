# Команда для создания топика
docker exec -it kafka1 kafka-topics --create --topic topic-1 --bootstrap-server kafka1:9092 --partitions 3 --replication-factor 2
docker exec -it kafka1 kafka-topics --create --topic topic-2 --bootstrap-server kafka1:9092 --partitions 3 --replication-factor 2

docker volume rm $(docker volume ls -q | grep zookeeper)
docker volume rm $(docker volume ls -q | grep kafka)

docker exec -it kafka1 kafka-acls --bootstrap-server kafka1:9092 \
  --add \
  --allow-principal User:CN=kafka-client \
  --operation Read \
  --operation Write \
  --operation Describe \
  --topic topic-1

docker exec -it kafka1 kafka-acls --bootstrap-server kafka1:9092 \
  --add \
  --allow-principal User:CN=kafka-client \
  --operation Write \
  --operation Describe \
  --topic topic-2

docker exec -it kafka1kafka-console-producer --bootstrap-server kafka1:9092 \
  --topic topic-1 \
  --producer-property security.protocol=SSL \
  --producer-property ssl.truststore.location=./client.truststore.jks \
  --producer-property ssl.truststore.password=changeit \
  --producer-property ssl.keystore.location=./client.keystore.jks \
  --producer-property ssl.keystore.password=changeit \
  --producer-property ssl.key.password=changeit

### Test

docker exec -it kafka1 kafka-console-producer --bootstrap-server kafka1:9092 \
  --topic topic-1 \
  --producer-property security.protocol=SSL \
  --producer-property ssl.truststore.location=kafka-0-creds/kafka-0.truststore.jks \
  --producer-property ssl.truststore.password=changeit \
  --producer-property ssl.keystore.location=kafka-0-creds/kafka-0.p12 \
  --producer-property ssl.keystore.password=changeit \
  --producer-property ssl.key.password=changeit


# Подробная информация о созданном топике
docker exec -it kafka1 kafka-topics --describe --topic first_topic --bootstrap-server kafka1:9092

Вывод:

Topic: first_topic      Partition: 0    Leader: 2       Replicas: 2,1   Isr: 2,1        Elr: N/A        LastKnownElr: N/A
Topic: first_topic      Partition: 1    Leader: 1       Replicas: 1,2   Isr: 1,2        Elr: N/A        LastKnownElr: N/A
Topic: first_topic      Partition: 2    Leader: 2       Replicas: 2,1   Isr: 2,1        Elr: N/A        LastKnownElr: N/A
